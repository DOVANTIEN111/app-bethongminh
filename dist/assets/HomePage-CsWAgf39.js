import{u as I,a as B,b as L,r as h,j as e}from"./index-SEf-vp2y.js";import{g as V}from"./subjects-NNsJmH-M.js";import{g as X}from"./englishVocab-9bZYkr7a.js";import{G as z,P as J,g as R,c as Y,a as $,H as K}from"./heart-B0g8mCnS.js";import{A as Z}from"./index-DA2yp9fc.js";import{m as i}from"./proxy-CJ2sU9O2.js";import{F as q,T as Q}from"./target-zh7fOExD.js";import{S as P}from"./star-CiNliaao.js";import{T as U}from"./trophy-Ck0hhijq.js";import{V as ee}from"./volume-2-C65Jo5z_.js";import{C}from"./chevron-right-DkPg2ViV.js";import{S as te}from"./sparkles-C7994Det.js";import{G as se}from"./gamepad-2-Di-vyEIi.js";import"./createLucideIcon-Ed0SvT_G.js";const ae={vocab:{id:"vocab",name:"Tá»« vá»±ng",icon:"ğŸ“š",desc:"Há»c 10 tá»« má»›i"},speak:{id:"speak",name:"PhÃ¡t Ã¢m",icon:"ğŸ¤",desc:"NÃ³i Ä‘Ãºng 5 tá»«"},math:{id:"math",name:"ToÃ¡n há»c",icon:"ğŸ”¢",desc:"Giáº£i 15 phÃ©p tÃ­nh"},game:{id:"game",name:"TrÃ² chÆ¡i",icon:"ğŸ®",desc:"Äáº¡t 500 Ä‘iá»ƒm"},streak:{id:"streak",name:"SiÃªng nÄƒng",icon:"ğŸ”¥",desc:"Há»c 3 bÃ i liÃªn tiáº¿p"}},u=()=>{const a=new Date;return`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`},E=()=>{const a=u();a.split("-").reduce((o,r)=>o+parseInt(r),0);const t=Object.values(ae),l=[],n=new Date().getDay();return[n%5,(n+1)%5,(n+2)%5].forEach((o,r)=>{const d=t[o];l.push({id:`${a}-${r}`,type:d.id,name:d.name,icon:d.icon,desc:d.desc,reward:50+r*25,target:ie(d.id),progress:0,completed:!1})}),l},ie=a=>{switch(a){case"vocab":return 10;case"speak":return 5;case"math":return 15;case"game":return 500;case"streak":return 3;default:return 5}},le=()=>{try{const a=localStorage.getItem("gdtm_daily_challenges");if(a){const l=JSON.parse(a);if(l.date===u())return l.challenges}const t=E();return localStorage.setItem("gdtm_daily_challenges",JSON.stringify({date:u(),challenges:t})),t}catch{return E()}},ne=(a=5)=>{const l=u().split("-").reduce((o,r)=>o+parseInt(r),0);return[...X()].sort((o,r)=>{const d=(o.word.charCodeAt(0)+l)%100,p=(r.word.charCodeAt(0)+l)%100;return d-p}).slice(0,a)},ce=({show:a})=>a?e.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(50)].map((t,l)=>e.jsx(i.div,{initial:{top:-20,left:`${Math.random()*100}%`,rotate:0,opacity:1},animate:{top:"110%",rotate:Math.random()*360,opacity:0},transition:{duration:Math.random()*2+2,delay:Math.random()*.5,ease:"linear"},className:"absolute w-3 h-3 rounded-sm",style:{backgroundColor:["#FF6B6B","#4ECDC4","#FFE66D","#95E1D3","#F38181","#AA96DA"][l%6]}},l))}):null,re=({achievement:a,onClose:t})=>(h.useEffect(()=>{const l=setTimeout(t,3e3);return()=>clearTimeout(l)},[t]),e.jsx(i.div,{initial:{scale:0,y:50},animate:{scale:1,y:0},exit:{scale:0,y:-50},className:"fixed bottom-24 left-4 right-4 bg-gradient-to-r from-amber-500 to-yellow-500 rounded-2xl p-4 shadow-2xl z-50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:.5},className:"text-5xl",children:a.icon}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsx("p",{className:"text-xs font-medium opacity-80",children:"ğŸ‰ Huy hiá»‡u má»›i!"}),e.jsx("p",{className:"font-bold text-lg",children:a.name}),e.jsx("p",{className:"text-sm opacity-90",children:a.desc})]})]})}));function ve(){var v,k,T,S,H;const a=I(),{currentChild:t,levelInfo:l}=B(),{playSound:n,speak:j}=L(),o=V(),[r,d]=h.useState([]),[p,D]=h.useState([]),[_,y]=h.useState(!1),[w,b]=h.useState(null),[g,M]=h.useState(0);h.useEffect(()=>{d(le()),D(ne(5))},[]),h.useEffect(()=>{var m,x;const s=parseInt(localStorage.getItem("gdtm_last_ach_count")||"0"),c=((m=t==null?void 0:t.achievements)==null?void 0:m.length)||0;if(c>s&&((x=t==null?void 0:t.achievements)==null?void 0:x.length)>0){const f={icon:"ğŸ†",name:t.achievements[t.achievements.length-1],desc:"ChÃºc má»«ng!"};b(f),y(!0),n("achievement"),localStorage.setItem("gdtm_last_ach_count",String(c)),setTimeout(()=>y(!1),3e3)}},[t==null?void 0:t.achievements]);const F=()=>{const s=new Date().getHours();return s<12?"ChÃ o buá»•i sÃ¡ng":s<18?"ChÃ o buá»•i chiá»u":"ChÃ o buá»•i tá»‘i"},W=s=>{n("click"),a(`/subject/${s}`)},G=s=>{n("click"),j(s)},O=r.filter(s=>s.completed).length;return e.jsxs("div",{className:"px-4 py-4 pb-24",children:[e.jsx(ce,{show:_}),e.jsx(Z,{children:w&&e.jsx(re,{achievement:w,onClose:()=>b(null)})}),e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[F(),", ",t==null?void 0:t.name,"! ğŸ‘‹"]}),e.jsx("p",{className:"text-gray-500",children:"HÃ´m nay con muá»‘n há»c gÃ¬ nÃ o?"})]}),e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-4 shadow-xl mb-4 text-white",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-4",children:[e.jsxs(i.div,{whileHover:{scale:1.05},className:"bg-white/20 rounded-2xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(q,{className:"w-5 h-5 text-orange-300"}),e.jsx("span",{className:"text-2xl font-bold",children:((v=t==null?void 0:t.stats)==null?void 0:v.streak)||0})]}),e.jsx("p",{className:"text-xs text-white/80",children:"Streak"})]}),e.jsxs(i.div,{whileHover:{scale:1.05},className:"bg-white/20 rounded-2xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(P,{className:"w-5 h-5 text-yellow-300"}),e.jsx("span",{className:"text-2xl font-bold",children:(t==null?void 0:t.xp)||0})]}),e.jsx("p",{className:"text-xs text-white/80",children:"XP"})]}),e.jsxs(i.div,{whileHover:{scale:1.05},className:"bg-white/20 rounded-2xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(U,{className:"w-5 h-5 text-amber-300"}),e.jsx("span",{className:"text-2xl font-bold",children:((k=t==null?void 0:t.achievements)==null?void 0:k.length)||0})]}),e.jsx("p",{className:"text-xs text-white/80",children:"Huy hiá»‡u"})]})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Level ",l==null?void 0:l.level," - ",l==null?void 0:l.title]}),e.jsxs("span",{className:"text-white/80",children:[Math.round((l==null?void 0:l.progress)||0),"%"]})]}),e.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:e.jsx(i.div,{initial:{width:0},animate:{width:`${(l==null?void 0:l.progress)||0}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full"})})]})]})}),e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-red-500"})," Thá»­ thÃ¡ch hÃ´m nay"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[O,"/",r.length]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:r.map((s,c)=>e.jsxs(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+c*.1},className:`flex items-center gap-3 p-3 ${c>0?"border-t border-gray-100":""}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl ${s.completed?"bg-green-100":"bg-gray-100"}`,children:s.completed?"âœ…":s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium ${s.completed?"text-green-600 line-through":"text-gray-800"}`,children:s.desc}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${s.completed?"bg-green-500":"bg-indigo-500"}`,style:{width:`${Math.min(100,s.progress/s.target*100)}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.progress,"/",s.target]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`text-sm font-bold ${s.completed?"text-green-600":"text-amber-500"}`,children:["+",s.reward," XP"]})})]},s.id))})]}),e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-purple-500"})," Tá»« vá»±ng hÃ´m nay"]}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-500 to-purple-500 rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center text-4xl",children:(T=p[g])==null?void 0:T.emoji},g),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsx("p",{className:"text-2xl font-bold",children:(S=p[g])==null?void 0:S.word}),e.jsx("p",{className:"text-white/80",children:(H=p[g])==null?void 0:H.vn})]}),e.jsx("button",{onClick:()=>{var s;return G((s=p[g])==null?void 0:s.word)},className:"p-3 bg-white/20 rounded-full",children:e.jsx(ee,{className:"w-6 h-6 text-white"})})]}),e.jsx("div",{className:"flex justify-center gap-2 mt-3",children:p.map((s,c)=>e.jsx("button",{onClick:()=>M(c),className:`w-2 h-2 rounded-full transition-all ${c===g?"w-6 bg-white":"bg-white/40"}`},c))})]})]}),e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.28},className:"mb-4",children:t!=null&&t.pet?e.jsx(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n("click"),a("/pet")},className:"w-full bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 rounded-2xl p-4 shadow-lg",children:(()=>{var m,x;J[t.pet.type];const s=R(t.pet.type,t.pet.xp||0),c=Y(t.pet.lastFed,t.pet.lastPlay);return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i.div,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},className:"text-5xl",children:s==null?void 0:s.icon}),e.jsxs("div",{className:"flex-1 text-left text-white",children:[e.jsx("p",{className:"font-bold text-lg",children:s==null?void 0:s.name}),e.jsxs("p",{className:"text-sm text-white/80 flex items-center gap-1",children:[e.jsx("span",{children:(m=$[c])==null?void 0:m.icon}),e.jsx("span",{children:(x=$[c])==null?void 0:x.name}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx(P,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.pet.xp||0," XP"]})]})]}),e.jsx("div",{className:"text-white/80",children:e.jsx(K,{className:"w-6 h-6"})})]})})()}):e.jsx(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n("click"),a("/pet")},className:"w-full bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 text-white",children:[e.jsx(i.span,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:1,repeat:1/0},className:"text-4xl",children:"ğŸ£"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-lg",children:"Nháº­n Pet miá»…n phÃ­!"}),e.jsx("p",{className:"text-sm text-white/90",children:"NuÃ´i pet cÃ¹ng há»c má»—i ngÃ y"})]}),e.jsx(C,{className:"w-6 h-6"})]})})}),e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-amber-500"})," Truy cáº­p nhanh"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n("click"),a("/english")},className:"bg-gradient-to-br from-indigo-500 to-purple-500 text-white rounded-2xl p-4 flex flex-col items-center shadow-lg",children:[e.jsx("span",{className:"text-4xl mb-2",children:"ğŸŒ"}),e.jsx("p",{className:"font-bold",children:"English Zone"}),e.jsx("p",{className:"text-white/80 text-xs",children:"10 chá»§ Ä‘á» â€¢ 5 games"})]}),e.jsxs(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n("click"),a("/stories")},className:"bg-gradient-to-br from-amber-500 to-orange-500 text-white rounded-2xl p-4 flex flex-col items-center shadow-lg",children:[e.jsx("span",{className:"text-4xl mb-2",children:"ğŸ“–"}),e.jsx("p",{className:"font-bold",children:"Truyá»‡n Cá»• TÃ­ch"}),e.jsx("p",{className:"text-white/80 text-xs",children:"5 truyá»‡n hay"})]}),e.jsxs(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n("click"),a("/games")},className:"bg-gradient-to-br from-pink-500 to-rose-500 text-white rounded-2xl p-4 flex flex-col items-center shadow-lg",children:[e.jsx(se,{className:"w-10 h-10 mb-2"}),e.jsx("p",{className:"font-bold",children:"Khu Vui ChÆ¡i"}),e.jsx("p",{className:"text-white/80 text-xs",children:"8 trÃ² chÆ¡i"})]}),e.jsxs(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n("click"),a("/pet")},className:"bg-gradient-to-br from-teal-500 to-cyan-500 text-white rounded-2xl p-4 flex flex-col items-center shadow-lg",children:[e.jsx("span",{className:"text-4xl mb-2",children:t!=null&&t.pet?"ğŸ¾":"ğŸ£"}),e.jsx("p",{className:"font-bold",children:"Pet cá»§a tÃ´i"}),e.jsx("p",{className:"text-white/80 text-xs",children:t!=null&&t.pet?"ChÄƒm sÃ³c pet":"Nháº­n pet má»›i"})]})]})]}),e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"ğŸ“š CÃ¡c MÃ´n Há»c"}),e.jsx("div",{className:"space-y-3",children:o.map((s,c)=>{var f,A;const m=(f=t==null?void 0:t.progress)==null?void 0:f[s.id],x=((A=m==null?void 0:m.completed)==null?void 0:A.length)||0,N=Math.round(x/s.lessons.length*100);return e.jsx(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+c*.05},children:e.jsxs(i.button,{whileHover:{scale:1.01,x:5},whileTap:{scale:.99},onClick:()=>W(s.id),className:`w-full bg-gradient-to-r ${s.color} text-white rounded-2xl p-4 flex items-center gap-4 shadow-lg text-left relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute -right-4 -top-4 text-8xl",children:s.icon})}),e.jsx("span",{className:"text-4xl relative",children:s.icon}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("p",{className:"font-bold text-lg",children:s.name}),e.jsx("p",{className:"text-white/80 text-sm",children:s.desc}),x>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-white/30 rounded-full",children:e.jsx("div",{className:"h-full bg-white rounded-full",style:{width:`${N}%`}})}),e.jsxs("span",{className:"text-xs font-medium",children:[N,"%"]})]})]}),e.jsx(C,{className:"w-6 h-6 text-white/60 relative"})]})},s.id)})})]}),e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-6 bg-gradient-to-r from-gray-800 to-gray-900 rounded-2xl p-4 text-white",children:[e.jsx("p",{className:"font-bold mb-1",children:"ğŸ“± CÃ i Ä‘áº·t á»©ng dá»¥ng"}),e.jsx("p",{className:"text-sm text-gray-300",children:"ThÃªm vÃ o mÃ n hÃ¬nh chÃ­nh Ä‘á»ƒ há»c offline!"})]})]})}export{ve as default};
