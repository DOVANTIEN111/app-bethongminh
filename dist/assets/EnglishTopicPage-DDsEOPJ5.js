import{c as W,u as F,a as V,b as L,r as d,j as e}from"./index-DujQnjn7.js";import{b as B}from"./englishVocab-9bZYkr7a.js";import{m as p}from"./proxy-BFCT-_i_.js";import{R as _}from"./rotate-ccw-DuaXxBMQ.js";import{A as P}from"./arrow-left-CUU1O6Xt.js";import{Z as H}from"./zap-B1rzSqCE.js";import{C as q}from"./chevron-right-CIM0EHvB.js";import{C as T,M as X}from"./mic-DWCFA7OH.js";import{V as A}from"./volume-2-DJzuLhS_.js";import{c as Y}from"./createLucideIcon-C1f9I39M.js";import{C as D}from"./chevron-left-CtTsAgSs.js";import{S as K}from"./star-CSWSp93I.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Z=[{id:"flashcard",name:"Flashcard",icon:"üé¥",desc:"Xem v√† h·ªçc t·ª´ng t·ª´",color:"from-blue-500 to-indigo-500"},{id:"listen",name:"Nghe & Ch·ªçn",icon:"üëÇ",desc:"Nghe v√† ch·ªçn ƒë√°p √°n ƒë√∫ng",color:"from-purple-500 to-pink-500"},{id:"spell",name:"ƒêi·ªÅn t·ª´",icon:"‚úçÔ∏è",desc:"Nh√¨n h√¨nh, ƒëi·ªÅn t·ª´",color:"from-green-500 to-emerald-500"},{id:"speak",name:"Ph√°t √¢m",icon:"üé§",desc:"Luy·ªán n√≥i chu·∫©n",color:"from-red-500 to-orange-500"},{id:"match",name:"N·ªëi t·ª´",icon:"üîó",desc:"N·ªëi t·ª´ v·ªõi nghƒ©a",color:"from-amber-500 to-yellow-500"}],z=({score:t})=>{const g=t>=90?3:t>=70?2:t>=50?1:0;return e.jsx("div",{className:"flex gap-1",children:[1,2,3].map(m=>e.jsx(K,{className:`w-8 h-8 ${m<=g?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},m))})},I=({topic:t,onSelect:g,progress:m})=>{var r;const w=F(),f=((r=m==null?void 0:m.learned)==null?void 0:r.length)||0,u=t.words.length,b=Math.round(f/u*100);return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:`bg-gradient-to-r ${t.color} text-white px-4 py-6`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>w("/english"),className:"p-2 rounded-full hover:bg-white/20",children:e.jsx(P,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-5xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.name}),e.jsxs("p",{className:"text-white/80",children:[t.nameVn," ‚Ä¢ ",u," t·ª´ v·ª±ng"]})]})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium",children:"Ti·∫øn ƒë·ªô h·ªçc"}),e.jsxs("span",{className:"font-bold",children:[f,"/",u," t·ª´ (",b,"%)"]})]}),e.jsx("div",{className:"h-3 bg-white/30 rounded-full overflow-hidden",children:e.jsx(p.div,{initial:{width:0},animate:{width:`${b}%`},transition:{duration:.5},className:"h-full bg-white rounded-full"})}),b===100&&e.jsx("p",{className:"text-center mt-2 font-bold",children:"üéâ Ho√†n th√†nh xu·∫•t s·∫Øc!"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-yellow-500"})," Ch·ªçn c√°ch h·ªçc"]}),e.jsx("div",{className:"space-y-3",children:Z.map((c,o)=>e.jsxs(p.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},onClick:()=>g(c.id),className:`w-full bg-gradient-to-r ${c.color} text-white rounded-2xl p-4 flex items-center gap-4 shadow-lg`,children:[e.jsx("span",{className:"text-4xl",children:c.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-lg",children:c.name}),e.jsx("p",{className:"text-white/80 text-sm",children:c.desc})]}),e.jsx(q,{className:"w-6 h-6"})]},c.id))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"üìö Danh s√°ch t·ª´ v·ª±ng"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.words.map((c,o)=>{var i;const x=(i=m==null?void 0:m.learned)==null?void 0:i.includes(c.word);return e.jsxs(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:o*.02},className:`p-3 rounded-xl flex items-center gap-2 ${x?"bg-green-100 border-2 border-green-400":"bg-white border-2 border-gray-100"}`,children:[e.jsx("span",{className:"text-2xl",children:c.emoji}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-800 truncate",children:c.word}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:c.vn})]}),x&&e.jsx(T,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]},c.word)})})]}),t.sentences&&t.sentences.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"üí¨ C√¢u m·∫´u"}),e.jsx("div",{className:"space-y-2",children:t.sentences.map((c,o)=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"font-medium text-gray-800",children:c.en}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:c.vn})]},o))})]})]})]})},G=({topic:t,progress:g,onComplete:m,onBack:w,onMarkLearned:f})=>{var v;const{playSound:u,speak:b}=L(),[r,c]=d.useState(0),[o,x]=d.useState(!1),[i,l]=d.useState(!1),h=t.words[r],j=(v=g==null?void 0:g.learned)==null?void 0:v.includes(h.word),N=()=>{u("click"),b(h.word)},C=()=>{l(!i),x(!o),u("pop")},k=()=>{r<t.words.length-1?(c(S=>S+1),l(!1),x(!1)):m(100)},n=()=>{r>0&&(c(S=>S-1),l(!1),x(!1))},s=()=>{j||(f(h.word),u("correct")),setTimeout(k,300)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-100 to-indigo-100 pb-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur px-4 py-3 flex items-center justify-between",children:[e.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(P,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üé¥ Flashcard"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[r+1," / ",t.words.length]})]}),e.jsx("div",{className:"w-10"})]}),e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full transition-all",style:{width:`${(r+1)/t.words.length*100}%`}})})}),e.jsx("div",{className:"px-4 py-8",children:e.jsx(p.div,{initial:{opacity:0,rotateY:-90},animate:{opacity:1,rotateY:0},className:"perspective-1000",children:e.jsxs(p.div,{animate:{rotateY:i?180:0},transition:{duration:.4},onClick:C,className:"relative w-full h-[350px] cursor-pointer preserve-3d",style:{transformStyle:"preserve-3d"},children:[e.jsxs("div",{className:"absolute inset-0 bg-white rounded-3xl shadow-xl p-6 flex flex-col items-center justify-center backface-hidden",style:{backfaceVisibility:"hidden"},children:[j&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"})," ƒê√£ h·ªçc"]}),e.jsx(p.span,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},className:"text-[100px]",children:h.emoji}),e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mt-4",children:h.word}),e.jsxs("button",{onClick:S=>{S.stopPropagation(),N()},className:"mt-4 px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-full flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"})," Nghe"]}),e.jsx("p",{className:"text-gray-400 mt-6 text-sm",children:"üëÜ Ch·∫°m ƒë·ªÉ xem nghƒ©a"})]}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-3xl shadow-xl p-6 flex flex-col items-center justify-center text-white",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[e.jsx("span",{className:"text-6xl mb-4",children:h.emoji}),e.jsx("h2",{className:"text-3xl font-bold",children:h.word}),e.jsx("p",{className:"text-2xl mt-4 text-white/90",children:h.vn}),e.jsx("p",{className:"text-white/60 mt-6 text-sm",children:"üëÜ Ch·∫°m ƒë·ªÉ l·∫≠t l·∫°i"})]})]})},r)}),e.jsx("div",{className:"px-4 space-y-3",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:n,disabled:r===0,className:`flex-1 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 ${r===0?"bg-gray-200 text-gray-400":"bg-white text-gray-700 shadow"}`,children:[e.jsx(D,{className:"w-5 h-5"})," Tr∆∞·ªõc"]}),e.jsxs("button",{onClick:s,className:`flex-1 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 ${j?"bg-green-100 text-green-600":"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg"}`,children:[e.jsx(T,{className:"w-5 h-5"})," ",j?"Ti·∫øp":"ƒê√£ nh·ªõ"]}),e.jsxs("button",{onClick:k,disabled:r===t.words.length-1,className:`flex-1 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 ${r===t.words.length-1?"bg-gray-200 text-gray-400":"bg-white text-gray-700 shadow"}`,children:["Sau ",e.jsx(q,{className:"w-5 h-5"})]})]})}),e.jsx("div",{className:"px-4 mt-6",children:e.jsx("div",{className:"flex justify-center gap-1 flex-wrap",children:t.words.map((S,y)=>{var a;return e.jsx("button",{onClick:()=>{c(y),l(!1),x(!1)},className:`w-3 h-3 rounded-full transition-all ${y===r?"w-8 bg-indigo-500":(a=g==null?void 0:g.learned)!=null&&a.includes(S.word)?"bg-green-400":"bg-gray-300"}`},y)})})})]})},J=({topic:t,progress:g,onComplete:m,onBack:w,onMarkLearned:f})=>{const{playSound:u,speak:b}=L(),[r,c]=d.useState([]),[o,x]=d.useState(0),[i,l]=d.useState(null),[h,j]=d.useState(!1),[N,C]=d.useState(0),[k,n]=d.useState([]);d.useEffect(()=>{const M=[...t.words].sort(()=>Math.random()-.5).slice(0,Math.min(10,t.words.length)).map($=>{const R=[...t.words.filter(Q=>Q.word!==$.word).sort(()=>Math.random()-.5).slice(0,3),$].sort(()=>Math.random()-.5);return{word:$,options:R}});c(M)},[t]);const s=r[o],v=()=>{s&&b(s.word.word)};d.useEffect(()=>{s&&!h&&setTimeout(v,500)},[o,r]);const S=a=>{if(h)return;l(a),j(!0);const M=a.word===s.word.word;n([...k,{question:s,selected:a,correct:M}]),M?(u("correct"),C($=>$+1),f(s.word.word)):u("wrong")},y=()=>{if(o<r.length-1)x(a=>a+1),l(null),j(!1);else{const a=Math.round(N/r.length*100);m(a)}};return r.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-100 to-pink-100 pb-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur px-4 py-3 flex items-center justify-between",children:[e.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(P,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üëÇ Nghe & Ch·ªçn"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["C√¢u ",o+1," / ",r.length]})]}),e.jsxs("div",{className:"bg-green-100 px-3 py-1 rounded-full text-green-600 font-bold",children:[N,"/",o+(h?1:0)]})]}),e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all",style:{width:`${(o+1)/r.length*100}%`}})})}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nghe v√† ch·ªçn t·ª´ ƒë√∫ng"}),e.jsx(p.button,{whileTap:{scale:.95},onClick:v,className:"w-24 h-24 mx-auto bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg mb-6",children:e.jsx(A,{className:"w-12 h-12 text-white"})}),e.jsx("p",{className:"text-gray-600",children:"B·∫•m ƒë·ªÉ nghe l·∫°i"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-6",children:s.options.map((a,M)=>{const $=a.word===s.word.word,E=(i==null?void 0:i.word)===a.word;let R="bg-white";return h&&($?R="bg-green-100 border-green-500":E&&(R="bg-red-100 border-red-500")),e.jsxs(p.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:M*.1},onClick:()=>S(a),disabled:h,className:`${R} border-2 rounded-2xl p-4 text-center transition-all ${h?"":"hover:border-purple-300 active:scale-95"}`,children:[e.jsx("span",{className:"text-4xl block mb-2",children:a.emoji}),e.jsx("p",{className:"font-bold text-gray-800",children:a.word}),e.jsx("p",{className:"text-sm text-gray-500",children:a.vn})]},a.word)})}),h&&e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6",children:[e.jsxs("div",{className:`p-4 rounded-2xl text-center mb-4 ${(i==null?void 0:i.word)===s.word.word?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.jsx("p",{className:"text-2xl mb-1",children:(i==null?void 0:i.word)===s.word.word?"üéâ ƒê√∫ng r·ªìi!":"üòÖ Sai r·ªìi!"}),e.jsxs("p",{children:["ƒê√°p √°n: ",e.jsx("strong",{children:s.word.word})," - ",s.word.vn]})]}),e.jsx("button",{onClick:y,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-bold text-lg",children:o<r.length-1?"C√¢u ti·∫øp theo ‚Üí":"Xem k·∫øt qu·∫£ üèÜ"})]})]})]})},U=({topic:t,progress:g,onComplete:m,onBack:w,onMarkLearned:f})=>{const{playSound:u,speak:b}=L(),[r,c]=d.useState([]),[o,x]=d.useState(0),[i,l]=d.useState(""),[h,j]=d.useState(!1),[N,C]=d.useState(0),[k,n]=d.useState(!1);d.useEffect(()=>{const a=[...t.words].sort(()=>Math.random()-.5);c(a.slice(0,Math.min(10,t.words.length)))},[t]);const s=r[o],v=()=>{if(!i.trim())return;const a=i.toLowerCase().trim()===s.word.toLowerCase();j(!0),a?(u("correct"),C(M=>M+1),f(s.word)):u("wrong")},S=()=>{if(o<r.length-1)x(a=>a+1),l(""),j(!1),n(!1);else{const a=Math.round(N/r.length*100);m(a)}},y=()=>{n(!0),b(s.word)};return r.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-green-100 to-emerald-100 pb-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur px-4 py-3 flex items-center justify-between",children:[e.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(P,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"‚úçÔ∏è ƒêi·ªÅn t·ª´"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["C√¢u ",o+1," / ",r.length]})]}),e.jsxs("div",{className:"bg-green-100 px-3 py-1 rounded-full text-green-600 font-bold",children:[N,"/",o+(h?1:0)]})]}),e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all",style:{width:`${(o+1)/r.length*100}%`}})})}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nh√¨n h√¨nh v√† ƒëi·ªÅn t·ª´ ti·∫øng Anh"}),e.jsx(p.div,{initial:{scale:0},animate:{scale:1},className:"text-[100px] mb-4",children:s.emoji},o),e.jsx("p",{className:"text-xl text-gray-700 font-medium mb-4",children:s.vn}),k&&e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-yellow-50 rounded-xl p-3 mb-4",children:e.jsxs("p",{className:"text-yellow-700",children:["üí° G·ª£i √Ω: ",e.jsxs("strong",{children:[s.word.charAt(0),"_".repeat(s.word.length-1)]})]})}),h?e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:`p-4 rounded-2xl mb-4 ${i.toLowerCase().trim()===s.word.toLowerCase()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.jsx("p",{className:"text-2xl mb-1",children:i.toLowerCase().trim()===s.word.toLowerCase()?"üéâ Ch√≠nh x√°c!":"üòÖ Ch∆∞a ƒë√∫ng!"}),e.jsxs("p",{children:["ƒê√°p √°n: ",e.jsx("strong",{className:"text-2xl",children:s.word})]})]}),e.jsx("button",{onClick:S,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-2xl font-bold text-lg",children:o<r.length-1?"C√¢u ti·∫øp theo ‚Üí":"Xem k·∫øt qu·∫£ üèÜ"})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:i,onChange:a=>l(a.target.value),onKeyPress:a=>a.key==="Enter"&&v(),placeholder:"Nh·∫≠p t·ª´ ti·∫øng Anh...",className:"w-full text-center text-2xl font-bold border-2 border-gray-200 rounded-xl p-4 focus:border-green-500 focus:outline-none",autoFocus:!0}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{onClick:y,disabled:k,className:"flex-1 py-3 bg-yellow-100 text-yellow-700 rounded-xl font-medium flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"})," G·ª£i √Ω"]}),e.jsx("button",{onClick:v,disabled:!i.trim(),className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-bold",children:"Ki·ªÉm tra"})]})]})]})})]})},ee=({topic:t,progress:g,onComplete:m,onBack:w,onMarkLearned:f})=>{const{playSound:u,speak:b,startListening:r,isListening:c,speechSupported:o}=L(),[x,i]=d.useState(0),[l,h]=d.useState(null),[j,N]=d.useState(0),[C,k]=d.useState(0),n=t.words[x],s=()=>{b(n.word),u("click")},v=()=>{if(!o){h({error:"not_supported"});return}h(null),r(n.word,y=>{h(y),k(a=>a+1),y.success&&y.score>=70?(u("correct"),N(a=>a+1),f(n.word)):u("wrong")})},S=()=>{if(x<t.words.length-1)i(y=>y+1),h(null);else{const y=Math.round(j/t.words.length*100);m(y)}};return o?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-red-100 to-orange-100 pb-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur px-4 py-3 flex items-center justify-between",children:[e.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(P,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üé§ Luy·ªán ph√°t √¢m"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x+1," / ",t.words.length]})]}),e.jsxs("div",{className:"bg-green-100 px-3 py-1 rounded-full text-green-600 font-bold",children:[j,"/",x+(l!=null&&l.success?1:0)]})]}),e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-orange-500 rounded-full transition-all",style:{width:`${(x+1)/t.words.length*100}%`}})})}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 text-center",children:[e.jsx(p.div,{initial:{scale:0},animate:{scale:1},className:"text-[80px] mb-4",children:n.emoji},x),e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-2",children:n.word}),e.jsx("p",{className:"text-gray-500 mb-4",children:n.vn}),e.jsxs("button",{onClick:s,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-full flex items-center gap-2 mx-auto mb-6",children:[e.jsx(A,{className:"w-5 h-5"})," Nghe m·∫´u"]}),l&&e.jsx(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"mb-6",children:l.success&&l.score>=70?e.jsxs("div",{className:"bg-green-100 rounded-2xl p-4",children:[e.jsx("p",{className:"text-3xl mb-2",children:l.score>=90?"üåü":l.score>=80?"‚≠ê":"üëç"}),e.jsx("p",{className:"text-green-700 font-bold text-lg",children:l.score>=90?"Xu·∫•t s·∫Øc!":l.score>=80?"R·∫•t t·ªët!":"T·ªët l·∫Øm!"}),e.jsxs("p",{className:"text-green-600",children:["ƒêi·ªÉm: ",l.score,"/100"]})]}):l.error==="no_speech"?e.jsxs("div",{className:"bg-yellow-100 rounded-2xl p-4",children:[e.jsx("p",{className:"text-3xl mb-2",children:"ü§î"}),e.jsx("p",{className:"text-yellow-700 font-bold",children:"Kh√¥ng nghe th·∫•y"}),e.jsx("p",{className:"text-yellow-600 text-sm",children:"N√≥i to v√† r√µ h∆°n nh√©!"})]}):e.jsxs("div",{className:"bg-orange-100 rounded-2xl p-4",children:[e.jsx("p",{className:"text-3xl mb-2",children:"üí™"}),e.jsx("p",{className:"text-orange-700 font-bold",children:"Th·ª≠ l·∫°i nh√©!"}),l.transcript&&e.jsxs("p",{className:"text-orange-600 text-sm",children:['B·∫°n n√≥i: "',l.transcript,'"']})]})}),c?e.jsxs(p.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:1},className:"bg-red-100 rounded-2xl p-6",children:[e.jsx("div",{className:"flex justify-center gap-1 mb-3",children:[...Array(5)].map((y,a)=>e.jsx(p.div,{animate:{height:[8,32,8]},transition:{repeat:1/0,duration:.5,delay:a*.1},className:"w-2 bg-red-400 rounded-full"},a))}),e.jsxs("p",{className:"text-red-600 font-bold",children:['ƒêang nghe... N√≥i: "',n.word,'"']})]}):e.jsxs("button",{onClick:v,className:"w-full py-4 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-2",children:[e.jsx(X,{className:"w-6 h-6"}),' B·∫•m ƒë·ªÉ n√≥i "',n.word,'"']})]}),(l==null?void 0:l.success)&&l.score>=70&&e.jsx(p.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onClick:S,className:"w-full mt-4 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-2xl font-bold text-lg",children:x<t.words.length-1?"T·ª´ ti·∫øp theo ‚Üí":"Xem k·∫øt qu·∫£ üèÜ"}),!(l!=null&&l.success)&&e.jsx("button",{onClick:S,className:"w-full mt-4 py-3 text-gray-500 underline",children:"B·ªè qua t·ª´ n√†y"})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center",children:[e.jsx("p",{className:"text-4xl mb-4",children:"üé§"}),e.jsx("p",{className:"text-gray-700 font-bold mb-2",children:"Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Vui l√≤ng d√πng Chrome ho·∫∑c Safari ƒë·ªÉ luy·ªán ph√°t √¢m"}),e.jsx("button",{onClick:w,className:"px-6 py-2 bg-gray-200 rounded-xl",children:"Quay l·∫°i"})]})})},se=({topic:t,progress:g,onComplete:m,onBack:w,onMarkLearned:f})=>{const{playSound:u}=L(),[b,r]=d.useState([]),[c,o]=d.useState([]),[x,i]=d.useState(null),[l,h]=d.useState([]),[j,N]=d.useState(null);d.useEffect(()=>{const n=[...t.words].sort(()=>Math.random()-.5).slice(0,6);r(n.map(s=>({...s,id:`w_${s.word}`}))),o([...n].sort(()=>Math.random()-.5).map(s=>({...s,id:`m_${s.word}`})))},[t]);const C=n=>{l.includes(n.word)||(i(n),N(null))},k=n=>{!x||l.includes(n.word)||(x.word===n.word?(u("correct"),h([...l,n.word]),f(n.word),i(null),l.length+1===b.length&&setTimeout(()=>m(100),500)):(u("wrong"),N(n.word),setTimeout(()=>{N(null),i(null)},500)))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-amber-100 to-yellow-100 pb-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur px-4 py-3 flex items-center justify-between",children:[e.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(P,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üîó N·ªëi t·ª´"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.length," / ",b.length]})]}),e.jsx("div",{className:"w-10"})]}),e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-yellow-500 rounded-full transition-all",style:{width:`${l.length/b.length*100}%`}})})}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("p",{className:"text-center text-gray-600 mb-4",children:"N·ªëi t·ª´ ti·∫øng Anh v·ªõi nghƒ©a ti·∫øng Vi·ªát"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1 space-y-2",children:b.map(n=>{const s=l.includes(n.word),v=(x==null?void 0:x.word)===n.word;return e.jsxs(p.button,{onClick:()=>C(n),disabled:s,className:`w-full p-3 rounded-xl text-left flex items-center gap-2 transition-all ${s?"bg-green-100 border-2 border-green-400 opacity-50":v?"bg-amber-200 border-2 border-amber-500 scale-105":"bg-white border-2 border-gray-100"}`,children:[e.jsx("span",{className:"text-2xl",children:n.emoji}),e.jsx("span",{className:"font-bold text-gray-800",children:n.word})]},n.id)})}),e.jsx("div",{className:"flex-1 space-y-2",children:c.map(n=>{const s=l.includes(n.word),v=j===n.word;return e.jsx(p.button,{onClick:()=>k(n),disabled:s||!x,animate:v?{x:[-5,5,-5,5,0]}:{},className:`w-full p-3 rounded-xl text-left transition-all ${s?"bg-green-100 border-2 border-green-400 opacity-50":v?"bg-red-100 border-2 border-red-400":x?"bg-white border-2 border-amber-200 hover:border-amber-400":"bg-gray-100 border-2 border-gray-100"}`,children:e.jsx("span",{className:"text-gray-800",children:n.vn})},n.id)})})]}),e.jsxs("button",{onClick:()=>{h([]),i(null),N(null);const n=[...t.words].sort(()=>Math.random()-.5).slice(0,6);r(n.map(s=>({...s,id:`w_${s.word}`}))),o([...n].sort(()=>Math.random()-.5).map(s=>({...s,id:`m_${s.word}`})))},className:"w-full mt-6 py-3 bg-white rounded-xl text-gray-600 flex items-center justify-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"})," Ch∆°i l·∫°i"]})]})]})},te=({score:t,topic:g,onRestart:m,onBack:w})=>{const{playSound:f}=L();return d.useEffect(()=>{f("achievement")},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-500 to-purple-600 flex items-center justify-center p-4",children:e.jsxs(p.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 text-center w-full max-w-sm",children:[e.jsx(p.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:.5},className:"text-7xl mb-4",children:"üèÜ"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Ho√†n th√†nh!"}),e.jsx("p",{className:"text-gray-500 mb-4",children:g.name}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(z,{score:t})}),e.jsxs("div",{className:"bg-indigo-100 rounded-2xl p-4 mb-6",children:[e.jsxs("p",{className:"text-4xl font-bold text-indigo-600",children:[t,"%"]}),e.jsx("p",{className:"text-indigo-500",children:"ƒêi·ªÉm c·ªßa b·∫°n"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:m,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"})," H·ªçc l·∫°i"]}),e.jsx("button",{onClick:w,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium",children:"Ch·ªçn c√°ch h·ªçc kh√°c"})]})]})})};function ge(){var k;const{topicId:t}=W();F();const{currentChild:g,updateChild:m}=V(),{playSound:w}=L(),f=B(t),[u,b]=d.useState(null),[r,c]=d.useState(!1),[o,x]=d.useState(0);if(!f)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Ch·ªß ƒë·ªÅ kh√¥ng t·ªìn t·∫°i"})});const i=((k=g==null?void 0:g.englishProgress)==null?void 0:k[t])||{learned:[]},l=n=>{const s={...g};s.englishProgress||(s.englishProgress={}),s.englishProgress[t]||(s.englishProgress[t]={learned:[]}),s.englishProgress[t].learned.includes(n)||(s.englishProgress[t].learned.push(n),s.xp=(s.xp||0)+5,s.pet&&(s.pet.xp=(s.pet.xp||0)+2,s.pet.lastFed=Date.now()),m(s))},h=n=>{x(n),c(!0);const s={...g};s.xp=(s.xp||0)+Math.round(n/5),m(s)},j=()=>{c(!1),x(0)},N=()=>{b(null),c(!1)};if(r)return e.jsx(te,{score:o,topic:f,onRestart:j,onBack:N});if(!u)return e.jsx(I,{topic:f,progress:i,onSelect:n=>{w("click"),b(n)}});const C={topic:f,progress:i,onComplete:h,onBack:N,onMarkLearned:l};switch(u){case"flashcard":return e.jsx(G,{...C});case"listen":return e.jsx(J,{...C});case"spell":return e.jsx(U,{...C});case"speak":return e.jsx(ee,{...C});case"match":return e.jsx(se,{...C});default:return e.jsx(I,{topic:f,progress:i,onSelect:b})}}export{ge as default};
