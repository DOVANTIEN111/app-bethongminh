import{u as B,a as G,b as H,r as d,j as e}from"./index-Bhf3JDob.js";import{g as J,b as _,c as q,d as A,P as S,H as z,a as y,G as R}from"./heart-BYXi61mt.js";import{A as D}from"./arrow-left-CmvFFSD0.js";import{A as k}from"./index-mDzRSEyD.js";import{m as a}from"./proxy-Ba4FSeeL.js";import{S as K}from"./star-DwBx6xJL.js";import{B as Q}from"./book-open-BRlrMtDU.js";import{S as U}from"./sparkles-BSsZ8HvA.js";import"./createLucideIcon-CdyANGYr.js";const V=({pet:h,stage:s,mood:c,onTap:x})=>{var j;const[l,p]=d.useState(!1),[N,g]=d.useState(!1),w=()=>{p(!0),g(!0),setTimeout(()=>p(!1),500),setTimeout(()=>g(!1),1e3),x==null||x()};return e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx(k,{children:N&&e.jsx(e.Fragment,{children:[...Array(5)].map((C,u)=>e.jsx(a.div,{initial:{opacity:1,y:0,x:0},animate:{opacity:0,y:-100,x:(u-2)*30},exit:{opacity:0},transition:{duration:1},className:"absolute text-3xl",style:{top:50},children:"â¤ï¸"},u))})}),e.jsx(a.div,{animate:l?{y:[0,-30,0],scale:[1,1.1,1]}:{y:[0,-5,0]},transition:l?{duration:.5}:{duration:2,repeat:1/0,ease:"easeInOut"},onClick:w,className:"cursor-pointer select-none",children:e.jsx("span",{className:"text-[120px] drop-shadow-lg",children:s.icon})}),e.jsx(a.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 text-4xl",children:(j=y[c])==null?void 0:j.icon}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("p",{className:"text-xl font-bold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Level ",s.level]})]})]})},W=({onSelect:h})=>{const[s,c]=d.useState(null),{playSound:x}=H();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-400 to-pink-400 p-4",children:[e.jsxs("div",{className:"text-center text-white mb-6",children:[e.jsx(a.h1,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"text-3xl font-bold mb-2",children:"ðŸŽ‰ Chá»n Pet cá»§a con!"}),e.jsx("p",{className:"text-white/80",children:"Pet sáº½ cÃ¹ng con há»c má»—i ngÃ y"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:Object.values(S).map((l,p)=>e.jsxs(a.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:p*.1},onClick:()=>{x("click"),c(l.id)},className:`bg-white rounded-2xl p-4 shadow-lg transition-all ${s===l.id?"ring-4 ring-yellow-400 scale-105":""}`,children:[e.jsx("span",{className:"text-6xl block mb-2",children:l.stages[1].icon}),e.jsx("p",{className:"font-bold text-gray-800",children:l.name})]},l.id))}),s&&e.jsxs(a.button,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},onClick:()=>h(s),className:"w-full bg-yellow-400 text-yellow-900 font-bold py-4 rounded-2xl text-xl shadow-lg",children:["Chá»n ",S[s].name,"! ðŸŽ‰"]})]})},Y=({pet:h,food:s,onComplete:c})=>(d.useEffect(()=>{const x=setTimeout(c,2e3);return()=>clearTimeout(x)},[c]),e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(a.div,{initial:{scale:0},animate:{scale:1},className:"bg-white rounded-3xl p-8 text-center",children:[e.jsx(a.div,{animate:{y:[0,-20,0],rotate:[0,10,-10,0]},transition:{duration:.5,repeat:3},className:"text-8xl mb-4",children:h.stages[1].icon}),e.jsx(a.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-5xl mb-4",children:s}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:"Ngon quÃ¡! +10 XP ðŸŽ‰"})]})}));function oe(){var M,T,F;const h=B(),{currentChild:s,updateChild:c,addXP:x}=G(),{playSound:l,speak:p}=H(),[N,g]=d.useState(!1),[w,j]=d.useState(null),[C,u]=d.useState(""),[E,f]=d.useState(!1),t=(s==null?void 0:s.pet)||null,m=t==null?void 0:t.type,b=(t==null?void 0:t.xp)||0,o=m?S[m]:null,v=o?J(m,b):null,{progress:X,nextStage:P,xpNeeded:O}=o?_(m,b):{},n=q(t==null?void 0:t.lastFed,t==null?void 0:t.lastPlay);d.useEffect(()=>{if(o&&n){const i=A(m,n);u(i),f(!0);const r=setTimeout(()=>f(!1),4e3);return()=>clearTimeout(r)}},[o,n,m]);const $=i=>{l("achievement");const r={...s,pet:{type:i,xp:0,lastFed:Date.now(),lastPlay:Date.now(),createdAt:Date.now()}};c(r)},I=()=>{l("pop");const i=A(m,n);u(i),f(!0),setTimeout(()=>f(!1),3e3);const r={...s,pet:{...t,lastPlay:Date.now()}};c(r)},L=i=>{l("correct"),j(i),g(!0);const r={...s,pet:{...t,xp:b+10,lastFed:Date.now()}};c(r)};return m?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-400 via-purple-400 to-pink-400",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>h("/"),className:"p-2 rounded-full bg-white/30",children:e.jsx(D,{className:"w-6 h-6 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-white",children:"Pet cá»§a tÃ´i"}),e.jsx("div",{className:"w-10"})]})}),e.jsxs("div",{className:"flex flex-col items-center pt-8 pb-4",children:[e.jsx(V,{pet:o,stage:v,mood:n,onTap:I}),e.jsx(k,{children:E&&e.jsx(a.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10},className:"mt-4 bg-white rounded-2xl px-6 py-3 shadow-lg max-w-xs",children:e.jsx("p",{className:"text-gray-700 text-center",children:C})})})]}),e.jsxs("div",{className:"px-4 space-y-4",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"Pet XP"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[b," XP"]})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(a.div,{initial:{width:0},animate:{width:`${X}%`},transition:{duration:1},className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full"})}),P?e.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:["CÃ²n ",e.jsxs("span",{className:"font-bold text-orange-500",children:[O," XP"]})," Ä‘á»ƒ tiáº¿n hÃ³a thÃ nh ",P.icon," ",P.name]}):e.jsx("p",{className:"text-sm text-green-600 mt-2 text-center font-bold",children:"ðŸŽ‰ Pet Ä‘Ã£ Ä‘áº¡t cáº¥p tá»‘i Ä‘a!"})]}),e.jsx("div",{className:"bg-white/90 backdrop-blur rounded-2xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"TÃ¢m tráº¡ng"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${(M=y[n])==null?void 0:M.color}`,children:[e.jsx("span",{className:"text-2xl",children:(T=y[n])==null?void 0:T.icon}),e.jsx("span",{className:"font-medium",children:(F=y[n])==null?void 0:F.name})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h("/"),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-2xl p-4 shadow-lg",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"font-bold",children:"Há»c bÃ i"}),e.jsx("p",{className:"text-xs text-white/80",children:"Cho pet Äƒn"})]}),e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n!=="sleeping"&&L(o.foods[Math.floor(Math.random()*o.foods.length)])},disabled:n==="sleeping",className:`rounded-2xl p-4 shadow-lg ${n==="sleeping"?"bg-gray-300 text-gray-500":"bg-gradient-to-r from-orange-500 to-amber-500 text-white"}`,children:[e.jsx(R,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"font-bold",children:"Cho Äƒn"}),e.jsx("p",{className:"text-xs opacity-80",children:n==="sleeping"?"Pet Ä‘ang ngá»§":o.foods.join(" ")})]})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(U,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"CÃ¡c giai Ä‘oáº¡n tiáº¿n hÃ³a"})]}),e.jsx("div",{className:"flex justify-between",children:o.stages.map((i,r)=>e.jsxs("div",{className:`flex flex-col items-center ${i.level<=v.level?"opacity-100":"opacity-40"}`,children:[e.jsx("span",{className:"text-3xl",children:i.icon}),e.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:["Lv.",i.level]}),i.level<=v.level&&e.jsx("span",{className:"text-xs text-green-500",children:"âœ“"})]},r))})]}),e.jsx("div",{className:"bg-yellow-100 rounded-2xl p-4 mb-20",children:e.jsxs("p",{className:"text-yellow-800 text-sm text-center",children:["ðŸ’¡ ",e.jsx("strong",{children:"Máº¹o:"})," Há»c bÃ i má»—i ngÃ y Ä‘á»ƒ pet Ä‘Æ°á»£c Äƒn vÃ  tiáº¿n hÃ³a nhanh hÆ¡n!"]})})]}),e.jsx(k,{children:N&&e.jsx(Y,{pet:o,food:w,onComplete:()=>g(!1)})})]}):e.jsx(W,{onSelect:$})}export{oe as default};
