import{u as q,a as B,r as s,j as e}from"./index-Bhf3JDob.js";function Q(){const i=q(),{account:r,children:b,currentChild:K,selectChild:P,addChild:S,verifyParentPin:A,subscription:L,planInfo:l,signOut:g,canAddChild:E,deviceAllowed:T,deviceError:G}=B(),[M,c]=s.useState(!1),[$,x]=s.useState(!1),[a,n]=s.useState(""),[f,d]=s.useState(""),[o,p]=s.useState(""),[j,N]=s.useState("ðŸ‘¦"),[m,y]=s.useState(""),[v,D]=s.useState("boy"),[w,C]=s.useState(!1),[k,h]=s.useState(""),V=["ðŸ‘¦","ðŸ‘§","ðŸ§’","ðŸ‘¶","ðŸ±","ðŸ¶","ðŸ¦","ðŸ°","ðŸ¼","ðŸ¦Š","ðŸ¸","ðŸ¦„"];if(s.useEffect(()=>{r||i("/auth")},[r,i]),!T)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“±"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Giá»›i háº¡n thiáº¿t bá»‹"}),e.jsx("p",{className:"text-gray-600 mb-6",children:G}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["GÃ³i hiá»‡n táº¡i: ",e.jsx("strong",{children:l==null?void 0:l.name})," (",l==null?void 0:l.maxDevices," thiáº¿t bá»‹)"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>i("/settings/devices"),className:"w-full py-3 bg-indigo-500 text-white rounded-xl font-medium",children:"Quáº£n lÃ½ thiáº¿t bá»‹"}),e.jsx("button",{onClick:()=>i("/settings/subscription"),className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-medium",children:"NÃ¢ng cáº¥p gÃ³i"}),e.jsx("button",{onClick:g,className:"w-full py-3 border border-gray-300 rounded-xl font-medium text-gray-600",children:"ÄÄƒng xuáº¥t"})]})]})});const X=t=>{P(t),i("/")},z=async()=>{if(!o.trim()){h("Vui lÃ²ng nháº­p tÃªn bÃ©");return}C(!0),h("");const t=await S(o.trim(),j,m?parseInt(m):null,v);t.error?h(t.error):(c(!1),p(""),y("")),C(!1)},H=()=>{x(!0),n(""),d("")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-4",children:[e.jsxs("div",{className:"text-center pt-8 pb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-white rounded-full flex items-center justify-center text-4xl shadow-xl mb-4",children:"ðŸŽ“"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Gia ÄÃ¬nh ThÃ´ng Minh"}),e.jsxs("p",{className:"text-white/70 mt-1",children:["Xin chÃ o, ",r==null?void 0:r.parent_name,"!"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘¦"})," Chá»n bÃ© Ä‘á»ƒ báº¯t Ä‘áº§u há»c"]}),e.jsxs("div",{className:"space-y-3",children:[b.map(t=>e.jsxs("button",{onClick:()=>X(t),className:"w-full bg-white rounded-2xl p-4 flex items-center gap-4 hover:scale-[1.02] transition shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-3xl",children:t.avatar}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-lg font-bold text-gray-800",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.age?`${t.age} tuá»•i â€¢ `:"","Level ",t.level||1," â€¢ ",t.xp||0," XP"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-orange-500 font-bold flex items-center gap-1",children:["ðŸ”¥ ",t.streak||0]}),e.jsx("div",{className:"text-xs text-gray-400",children:"ngÃ y"})]}),e.jsx("span",{className:"text-2xl text-gray-300",children:"â€º"})]},t.id)),E?e.jsxs("button",{onClick:()=>c(!0),className:"w-full border-2 border-dashed border-white/40 rounded-2xl p-4 flex items-center justify-center gap-2 text-white/80 hover:bg-white/10 transition",children:[e.jsx("span",{className:"text-2xl",children:"âž•"}),e.jsx("span",{className:"font-medium",children:"ThÃªm bÃ© má»›i"})]}):e.jsxs("div",{className:"text-center text-white/60 text-sm py-2",children:["ÄÃ£ Ä‘áº¡t giá»›i háº¡n ",l==null?void 0:l.maxChildren," bÃ©."," ",e.jsx("button",{onClick:()=>i("/settings/subscription"),className:"underline text-yellow-300",children:"NÃ¢ng cáº¥p"})]}),b.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-5xl mb-3",children:"ðŸ‘¶"}),e.jsx("p",{className:"text-white/80",children:"ChÆ°a cÃ³ bÃ© nÃ o"}),e.jsx("p",{className:"text-white/60 text-sm",children:"ThÃªm bÃ© Ä‘á»ƒ báº¯t Ä‘áº§u há»c!"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:H,className:"w-full bg-white/10 backdrop-blur rounded-2xl p-4 flex items-center gap-4 hover:bg-white/20 transition border border-white/20",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-2xl",children:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"Khu vá»±c Phá»¥ huynh"}),e.jsx("p",{className:"text-sm text-white/70",children:"Xem tiáº¿n Ä‘á»™, cÃ i Ä‘áº·t, quáº£n lÃ½"})]}),e.jsx("span",{className:"text-2xl text-white/50",children:"ðŸ”’"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:g,className:"text-white/60 text-sm hover:text-white/80 transition",children:"ðŸšª ÄÄƒng xuáº¥t"})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"âž• ThÃªm bÃ© má»›i"}),k&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm",children:["âš ï¸ ",k]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TÃªn bÃ© *"}),e.jsx("input",{type:"text",value:o,onChange:t=>p(t.target.value),placeholder:"VD: Bom",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tuá»•i"}),e.jsx("input",{type:"number",value:m,onChange:t=>y(t.target.value),placeholder:"VD: 5",min:"1",max:"15",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Giá»›i tÃ­nh"}),e.jsx("div",{className:"flex gap-3",children:[{value:"boy",label:"ðŸ‘¦ Con trai"},{value:"girl",label:"ðŸ‘§ Con gÃ¡i"}].map(t=>e.jsx("button",{type:"button",onClick:()=>{D(t.value),N(t.value==="boy"?"ðŸ‘¦":"ðŸ‘§")},className:`flex-1 py-3 rounded-xl font-medium transition ${v===t.value?"bg-indigo-500 text-white":"bg-gray-100 text-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chá»n avatar"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:V.map(t=>e.jsx("button",{type:"button",onClick:()=>N(t),className:`w-12 h-12 rounded-full text-2xl flex items-center justify-center transition ${j===t?"bg-indigo-500 ring-4 ring-indigo-300 scale-110":"bg-gray-100 hover:bg-gray-200"}`,children:t},t))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-3 border border-gray-300 rounded-xl font-medium text-gray-600 hover:bg-gray-50",children:"Há»§y"}),e.jsx("button",{onClick:z,disabled:w,className:"flex-1 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-medium disabled:opacity-50",children:w?"Äang thÃªm...":"ThÃªm bÃ©"})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-sm",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-3xl mb-3",children:"ðŸ”’"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Nháº­p mÃ£ PIN"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"MÃ£ PIN 4 sá»‘ Ä‘á»ƒ vÃ o khu vá»±c phá»¥ huynh"})]}),f&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm text-center",children:["âš ï¸ ",f]}),e.jsx("div",{className:"flex justify-center gap-3 mb-6",children:[0,1,2,3].map(t=>e.jsx("div",{className:`w-14 h-14 rounded-xl border-2 flex items-center justify-center text-2xl font-bold ${a[t]?"border-indigo-500 bg-indigo-50":"border-gray-200"}`,children:a[t]?"â€¢":""},t))}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[1,2,3,4,5,6,7,8,9,"",0,"âŒ«"].map((t,R)=>e.jsx("button",{onClick:()=>{if(t==="âŒ«")n(a.slice(0,-1)),d("");else if(t!==""&&a.length<4){const u=a+t;n(u),d(""),u.length===4&&setTimeout(()=>{A(u)?(x(!1),i("/parent")):(d("MÃ£ PIN khÃ´ng Ä‘Ãºng"),n(""))},100)}},disabled:t==="",className:`h-14 rounded-xl text-xl font-semibold transition ${t===""?"invisible":t==="âŒ«"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-100 text-gray-800 hover:bg-gray-200 active:bg-indigo-100"}`,children:t},R))}),e.jsx("button",{onClick:()=>x(!1),className:"w-full py-3 text-gray-500 font-medium hover:text-gray-700",children:"Há»§y"}),e.jsx("p",{className:"text-center text-xs text-gray-400 mt-3",children:"PIN máº·c Ä‘á»‹nh: 0000"})]})})]})}export{Q as default};
