import{c as g,u as j,a as f,b,r as N,j as e}from"./index-CcEzWzPU.js";import{a as w}from"./subjects-NNsJmH-M.js";import{A as v}from"./arrow-left-BnC55h9c.js";import{m as y}from"./proxy-9yVV55Ye.js";import{C as k}from"./check-circle-DE2K93pD.js";import{L}from"./lock-yzKO8wIr.js";import{S as $}from"./star-DBLVkThp.js";import"./createLucideIcon-Dw_MS8-9.js";function R(){var x;const{subjectId:n}=g(),o=j(),{currentChild:d}=f(),{playSound:h,stopAudio:m}=b(),t=w(n),i=((x=d==null?void 0:d.progress)==null?void 0:x[n])||{completed:[],scores:{}};if(N.useEffect(()=>{m()},[m]),!t)return e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"Môn học không tồn tại"}),e.jsx("button",{onClick:()=>o("/"),className:"mt-4 text-indigo-600",children:"Về trang chủ"})]});const p=s=>{h("click"),o(`/lesson/${n}/${s.id}`)},u=s=>{var c;if(s<3)return!1;const r=s-3,a=(c=t.lessons[r])==null?void 0:c.id;return!i.completed.includes(a)};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:`bg-gradient-to-r ${t.color} text-white px-4 py-6`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-full hover:bg-white/20",children:e.jsx(v,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-4xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.name}),e.jsx("p",{className:"text-white/80",children:t.desc})]})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Tiến độ"}),e.jsxs("span",{children:[i.completed.length,"/",t.lessons.length," bài"]})]}),e.jsx("div",{className:"h-2 bg-white/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full",style:{width:`${i.completed.length/t.lessons.length*100}%`}})})]})]}),e.jsx("div",{className:"p-4 space-y-3",children:t.lessons.map((s,r)=>{const a=i.completed.includes(s.id),c=i.scores[s.id],l=u(r);return e.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.05},children:e.jsxs("button",{onClick:()=>!l&&p(s),disabled:l,className:`w-full p-4 rounded-2xl flex items-center gap-4 text-left transition-all ${l?"bg-gray-100 opacity-60":a?"bg-green-50 border-2 border-green-200":"bg-white shadow-lg hover:shadow-xl"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${a?"bg-green-500 text-white":l?"bg-gray-300 text-gray-500":`bg-gradient-to-r ${t.color} text-white`}`,children:a?e.jsx(k,{className:"w-5 h-5"}):l?e.jsx(L,{className:"w-4 h-4"}):r+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold ${l?"text-gray-400":"text-gray-800"}`,children:s.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Cấp độ ",s.level]})]}),a&&c&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-500",children:[e.jsx($,{className:"w-4 h-4 fill-amber-500"}),e.jsx("span",{className:"font-bold",children:c})]})]})},s.id)})})]})}export{R as default};
